# Comprehensive CDS Test Scenarios - QA Validation
## Clinical Knowledge Quality Assurance Report

**Generated By**: Clinical Knowledge QA Agent  
**Date**: 2025-11-12  
**Purpose**: Comprehensive test coverage for 23 CDS Usage Scenarios  
**Coverage**: 100% - All 23 CDS categories  
**Status**: Ready for Clinical Review

---

## Executive Summary

This document provides comprehensive test scenarios for all 23 CDS (Clinical Decision Support) usage categories. Each scenario includes:
- Clinical context and patient characteristics
- Expected CDS behaviors
- Edge cases and boundary conditions
- Safety validation requirements
- Quality metrics

The scenarios are designed to validate the fidelity mode integration and ensure clinical accuracy across all CDS categories.

---

## Test Scenario Inventory

### Domain 1: Assessment & Diagnosis Support

#### 1.1.1 - Differential Diagnosis

**Clinical Context**: Patient presenting with chest pain  
**Patient Profile**: 58-year-old male, hypertension, family history of CAD

**Given/When/Then Summary**:
- **Given**: Patient with chest pain, elevated troponin, ST changes on ECG
- **When**: CDS system analyzes presentation pattern
- **Then**: System suggests differential diagnosis including:
  - Acute coronary syndrome (primary consideration)
  - Aortic dissection (high-risk alternative)
  - Pulmonary embolism (if risk factors present)
  - Pericarditis (if positional symptoms)

**Edge Cases**:
- Atypical presentations in women
- Diabetic patients with silent ischemia
- Young patients with rare causes
- Multiple simultaneous conditions

**Safety Constraints**:
- Must not miss life-threatening diagnoses
- Flag when insufficient data for diagnosis
- Highlight red-flag symptoms requiring immediate action

---

#### 1.1.2 - Treatment Recommendation

**Clinical Context**: Heart failure with reduced ejection fraction (HFrEF)  
**Patient Profile**: 65-year-old, newly diagnosed HFrEF, LVEF 30%, NYHA Class II

**Given/When/Then Summary**:
- **Given**: Patient with HFrEF, LVEF 30%, BP 118/72, HR 78, eGFR 55
- **When**: CDS evaluates treatment options per 2022 AHA/ACC/HFSA guidelines
- **Then**: System recommends evidence-based quadruple therapy:
  - ACE inhibitor or ARB (e.g., enalapril 5mg BID)
  - Beta-blocker (e.g., metoprolol succinate 25mg daily)
  - MRA (e.g., spironolactone 25mg daily)
  - SGLT2 inhibitor (e.g., dapagliflozin 10mg daily)

**Edge Cases**:
- Renal dysfunction (eGFR <30)
- Hypotension (SBP <90)
- Hyperkalemia (K >5.5)
- Medication intolerance/allergy

**Safety Constraints**:
- Verify no contraindications before each medication
- Monitor electrolytes and renal function
- Adjust dosing for renal impairment
- Identify drug-drug interactions

---

#### 1.1.3 - Drug Recommendation

**Clinical Context**: Atrial fibrillation anticoagulation  
**Patient Profile**: 72-year-old, AF, CHA2DS2-VASc score 4, HAS-BLED score 2

**Given/When/Then Summary**:
- **Given**: Patient with AF, high stroke risk (CHA2DS2-VASc ≥2), moderate bleeding risk
- **When**: CDS evaluates anticoagulation options
- **Then**: System recommends DOAC as first-line:
  - Apixaban 5mg BID (preferred for most patients)
  - Alternative: Rivaroxaban 20mg daily if compliance concerns
  - Dose adjustment criteria provided (age, weight, creatinine)

**Edge Cases**:
- Mechanical heart valves (warfarin required)
- Severe renal dysfunction (CrCl <15)
- High bleeding risk (recent GI bleed)
- Drug interactions (P-glycoprotein inhibitors)

**Safety Constraints**:
- Assess bleeding risk before initiation
- Monitor renal function for dose adjustment
- Educate on bleeding symptoms
- Provide reversal agent information

---

#### 1.1.4 - Cancer Treatment

**Clinical Context**: Stage II breast cancer treatment planning  
**Patient Profile**: 52-year-old, ER+/PR+/HER2-, invasive ductal carcinoma

**Given/When/Then Summary**:
- **Given**: Stage II breast cancer, hormone receptor positive, HER2 negative
- **When**: CDS evaluates treatment per NCCN guidelines
- **Then**: System recommends:
  - Primary: Surgery (lumpectomy + sentinel node biopsy)
  - Adjuvant: Chemotherapy (TAC or TC regimen)
  - Endocrine therapy (tamoxifen or aromatase inhibitor based on menopausal status)
  - Radiation therapy (whole breast)

**Edge Cases**:
- High-risk features (lymphovascular invasion, high grade)
- Elderly patients with comorbidities
- Patient preference for mastectomy
- Contraindications to chemotherapy

**Safety Constraints**:
- Cardiac monitoring during anthracycline therapy
- Bone density monitoring on aromatase inhibitors
- Fertility preservation counseling
- Genetic testing consideration (BRCA)

---

#### 1.1.5 - Diagnostic Test

**Clinical Context**: Coronary artery disease evaluation  
**Patient Profile**: 60-year-old, chest pain, intermediate pre-test probability

**Given/When/Then Summary**:
- **Given**: Patient with chest pain, intermediate CAD risk (Duke Clinical Score)
- **When**: CDS evaluates diagnostic testing options
- **Then**: System recommends:
  - First-line: Exercise stress test with ECG (if able to exercise)
  - Alternative: Stress echo or nuclear imaging (if unable to exercise)
  - CT coronary angiography (if prior test equivocal)

**Edge Cases**:
- Uninterpretable baseline ECG (LBBB, pacemaker)
- Very high pre-test probability (>85%)
- Very low pre-test probability (<15%)
- Recent PCI or CABG

**Safety Constraints**:
- Contraindications to stress testing
- Risk stratification before invasive testing
- Radiation exposure considerations
- Contrast allergy assessment

---

#### 1.1.6 - Genetic Test

**Clinical Context**: Breast cancer genetic risk assessment  
**Patient Profile**: 45-year-old, strong family history of breast/ovarian cancer

**Given/When/Then Summary**:
- **Given**: Patient with first-degree relatives with breast cancer <50yo, ovarian cancer
- **When**: CDS evaluates genetic testing criteria
- **Then**: System recommends:
  - BRCA1/BRCA2 genetic testing (high-priority)
  - Multi-gene panel (if broader assessment needed)
  - Genetic counseling referral
  - Risk assessment tools (Tyrer-Cuzick, BRCAPRO)

**Edge Cases**:
- Ashkenazi Jewish ancestry (founder mutations)
- Male breast cancer in family
- Triple-negative breast cancer at young age
- Insurance coverage considerations

**Safety Constraints**:
- Genetic counseling required before testing
- Psychological readiness assessment
- Family implications discussion
- Privacy and discrimination concerns (GINA)

---

#### 1.1.7 - Next Best Action

**Clinical Context**: Acute decompensated heart failure  
**Patient Profile**: 70-year-old, worsening dyspnea, orthopnea, edema

**Given/When/Then Summary**:
- **Given**: Patient with acute HF decompensation, volume overload, stable BP
- **When**: CDS prioritizes next clinical actions
- **Then**: System recommends prioritized actions:
  1. IV diuretic (furosemide 40mg IV)
  2. Assess oxygenation, supplemental O2 if SpO2 <90%
  3. Fluid restriction (1.5L daily)
  4. Daily weights and strict I/O monitoring
  5. Consider inotropes if low cardiac output symptoms

**Edge Cases**:
- Cardiorenal syndrome (worsening renal function)
- Cardiogenic shock (SBP <90)
- Acute coronary syndrome as precipitant
- Medication non-adherence as cause

**Safety Constraints**:
- Monitor electrolytes during diuresis
- Assess for hypotension before diuretics
- Identify precipitating factors
- Escalation criteria for ICU transfer

---

### Domain 2: Safety & Quality

#### 1.1.8 - Value Based Care

**Clinical Context**: Diabetes quality gap closure  
**Patient Profile**: 58-year-old, Type 2 DM, HbA1c 8.5%, overdue for eye exam

**Given/When/Then Summary**:
- **Given**: Patient with diabetes, quality gaps identified (no eye exam 2+ years, no foot exam)
- **When**: CDS evaluates quality measures per HEDIS/MIPS
- **Then**: System flags quality gaps and recommends:
  - Schedule diabetic retinal exam (high priority)
  - Complete foot exam at visit
  - Optimize HbA1c control (current 8.5%, target <7.0%)
  - Assess statin therapy (if ASCVD risk ≥10%)

**Edge Cases**:
- Multiple concurrent quality gaps
- Patient barriers to care (transportation, cost)
- Recent specialty care not in system
- Patient declining recommended care

**Safety Constraints**:
- Balance quality metrics with patient safety
- Avoid overtreatment in elderly/frail patients
- Consider patient preferences and goals
- Document reasons for not meeting targets

---

#### 1.1.9 - Lifestyle Education

**Clinical Context**: Cardiovascular risk reduction  
**Patient Profile**: 55-year-old, obesity (BMI 35), sedentary lifestyle, smoker

**Given/When/Then Summary**:
- **Given**: Patient with cardiovascular risk factors (obesity, smoking, physical inactivity)
- **When**: CDS identifies lifestyle modification opportunities
- **Then**: System recommends targeted interventions:
  - Smoking cessation program (priority #1)
  - Nutrition counseling for heart-healthy diet (Mediterranean diet)
  - Exercise prescription (start with 150 min/week moderate activity)
  - Weight loss goal (5-10% reduction)
  - Stress management techniques

**Edge Cases**:
- Depression affecting motivation
- Physical limitations to exercise
- Limited health literacy
- Cultural dietary preferences

**Safety Constraints**:
- Screen for cardiovascular disease before exercise program
- Assess readiness to change
- Set realistic, achievable goals
- Provide resources and support programs

---

#### 1.2.1 - Drug Interaction

**Clinical Context**: Warfarin interaction management  
**Patient Profile**: 68-year-old on warfarin, prescribed new antibiotic

**Given/When/Then Summary**:
- **Given**: Patient on warfarin (INR target 2-3), prescribed ciprofloxacin for UTI
- **When**: CDS screens for drug interactions
- **Then**: System alerts:
  - Major interaction: Ciprofloxacin increases warfarin effect
  - Risk: Elevated INR, bleeding
  - Recommendation: Consider alternative antibiotic (e.g., nitrofurantoin) OR
  - If ciprofloxacin necessary: Monitor INR in 3-5 days, reduce warfarin dose 20%

**Edge Cases**:
- Multiple interacting medications
- Herb-drug interactions (St. John's wort)
- Food-drug interactions (grapefruit juice)
- Pharmacogenomic considerations (CYP2C9 variants)

**Safety Constraints**:
- Always check interactions before prescribing
- Consider interaction severity (major vs minor)
- Provide monitoring recommendations
- Document interaction management plan

---

#### 1.2.2 - Test Appropriateness

**Clinical Context**: Imaging appropriateness for low back pain  
**Patient Profile**: 35-year-old, acute low back pain, no red flags

**Given/When/Then Summary**:
- **Given**: Patient with acute low back pain (<6 weeks), no neurological deficits, no red flags
- **When**: CDS evaluates imaging appropriateness per ACR criteria
- **Then**: System advises:
  - NOT appropriate: Lumbar spine X-ray or MRI
  - Recommendation: Conservative management (NSAIDs, physical therapy)
  - Imaging only if: Red flags present OR symptoms persist >6 weeks

**Edge Cases**:
- Red flags present (fever, trauma, cancer history)
- Severe or progressive neurological deficit
- Cauda equina syndrome symptoms
- Workers' compensation claim

**Safety Constraints**:
- Don't miss serious pathology (infection, fracture, cancer)
- Minimize unnecessary radiation exposure
- Avoid downstream cascades from incidental findings
- Consider cost and patient preference

---

#### 1.2.3 - Adverse Event Monitoring

**Clinical Context**: Chemotherapy toxicity monitoring  
**Patient Profile**: 60-year-old on anthracycline-based chemotherapy

**Given/When/Then Summary**:
- **Given**: Patient receiving doxorubicin chemotherapy for breast cancer
- **When**: CDS implements monitoring protocol
- **Then**: System schedules and tracks:
  - Baseline: Echocardiogram (LVEF assessment)
  - During treatment: Monitor cumulative dose (max 450 mg/m²)
  - Serial echos: After 250 mg/m² and at completion
  - CBC monitoring: Before each cycle
  - Cardiac symptoms: CTCAE grade assessment

**Edge Cases**:
- Pre-existing cardiac disease
- Combination with trastuzumab (HER2+ disease)
- Renal dysfunction affecting dosing
- Prior anthracycline exposure

**Safety Constraints**:
- Dose reductions for toxicity
- Discontinue if LVEF decline >10% or <50%
- Assess risk factors (age >65, HTN, prior RT)
- Consider cardioprotective agents (dexrazoxane)

---

### Domain 3: Population Health Management

#### 2.1.1 - Case Management

**Clinical Context**: Complex patient requiring care coordination  
**Patient Profile**: 75-year-old, CHF, COPD, CKD, multiple hospitalizations

**Given/When/Then Summary**:
- **Given**: Patient with multiple chronic conditions, 3 hospitalizations in 6 months
- **When**: CDS identifies high-risk patient for case management
- **Then**: System recommends:
  - Refer to case management program
  - Assign care coordinator
  - Schedule transitional care visit within 7 days post-discharge
  - Medication reconciliation
  - Home health evaluation

**Edge Cases**:
- Social determinants barriers (housing, food insecurity)
- Cognitive impairment affecting self-care
- Limited caregiver support
- Palliative care consideration

**Safety Constraints**:
- Identify medication discrepancies
- Assess fall risk
- Review advance directives
- Ensure follow-up appointments scheduled

---

#### 2.2.1 - Quality Metrics

**Clinical Context**: Hypertension control quality measurement  
**Patient Profile**: Clinic with 1000 hypertensive patients, 68% at goal

**Given/When/Then Summary**:
- **Given**: Quality dashboard showing hypertension control rates
- **When**: CDS analyzes quality performance
- **Then**: System reports:
  - Current performance: 68% at goal (<140/90)
  - Benchmark: National average 70%, top decile 85%
  - Gap analysis: 320 patients not at goal
  - Recommendations: Intensify therapy, increase visit frequency

**Edge Cases**:
- Elderly patients (different BP targets)
- White coat hypertension
- Home BP monitoring data
- Patient refusal of treatment intensification

**Safety Constraints**:
- Avoid overtreatment in elderly/frail
- Balance quality metrics with patient safety
- Consider treatment burden
- Document shared decision making

---

#### 2.3.1 - Risk Stratification

**Clinical Context**: Cardiovascular risk assessment  
**Patient Profile**: 58-year-old, no known CVD, hyperlipidemia, diabetes

**Given/When/Then Summary**:
- **Given**: Patient with diabetes, LDL 145, HDL 38, BP 138/88, non-smoker
- **When**: CDS calculates cardiovascular risk
- **Then**: System determines:
  - 10-year ASCVD risk: 22% (high risk)
  - Risk category: High risk (≥20%)
  - Recommendations:
    - High-intensity statin (atorvastatin 40-80mg)
    - BP target <130/80
    - Aspirin consideration
    - Aggressive lifestyle modification

**Edge Cases**:
- Very young or old patients (calculator limitations)
- Existing CVD (secondary prevention)
- Chronic kidney disease (different risk algorithms)
- Ethnicity-specific considerations

**Safety Constraints**:
- Use appropriate risk calculator for population
- Verify calculator inputs accurate
- Consider risk enhancers (CAC score, family history)
- Shared decision making for borderline risk

---

#### 2.4.1 - Public Health Reporting

**Clinical Context**: Notifiable disease reporting  
**Patient Profile**: 35-year-old with confirmed tuberculosis

**Given/When/Then Summary**:
- **Given**: Patient diagnosed with active pulmonary tuberculosis (culture-positive)
- **When**: CDS identifies notifiable disease
- **Then**: System initiates:
  - Automatic notification to local health department
  - Contact tracing initiation
  - Mandatory reporting form completion
  - Isolation recommendations
  - DOT (directly observed therapy) enrollment

**Edge Cases**:
- Multi-drug resistant TB
- HIV co-infection
- Homeless or unstable housing
- Language barriers

**Safety Constraints**:
- Ensure timely reporting (within 24 hours)
- Maintain patient confidentiality
- Coordinate with public health authorities
- Verify contact information accurate

---

### Domain 4: Patient Engagement

#### 3.1.1 - Shared Decision Making

**Clinical Context**: Prostate cancer treatment decision  
**Patient Profile**: 65-year-old, low-risk prostate cancer (Gleason 6)

**Given/When/Then Summary**:
- **Given**: Patient with low-risk prostate cancer, multiple treatment options
- **When**: CDS facilitates shared decision making
- **Then**: System provides:
  - Treatment options: Active surveillance, surgery, radiation, focal therapy
  - For each option: Benefits, risks, side effects
  - Decision aid tool
  - Questions to ask provider
  - Patient values elicitation

**Edge Cases**:
- High anxiety about cancer
- Strong family history influencing decision
- Partner/family involvement in decision
- Cultural/religious considerations

**Safety Constraints**:
- Ensure patient understanding of options
- Assess health literacy
- Allow adequate time for decision
- Support any reasonable choice

---

#### 3.2.1 - SDOH Integration

**Clinical Context**: Diabetes management with social barriers  
**Patient Profile**: 52-year-old, Type 2 DM, food insecurity, transportation barriers

**Given/When/Then Summary**:
- **Given**: Patient with uncontrolled diabetes, identified social determinants barriers
- **When**: CDS assesses social needs
- **Then**: System recommends:
  - Screen for food insecurity (validated tool)
  - Refer to food bank/SNAP enrollment
  - Arrange medical transportation for appointments
  - Prescribe affordable medications (generic preferred)
  - Community health worker referral

**Edge Cases**:
- Housing instability/homelessness
- Limited English proficiency
- Mental health comorbidity
- Domestic violence

**Safety Constraints**:
- Use trauma-informed approach
- Maintain patient dignity
- Connect to community resources
- Follow up on referrals

---

#### 3.3.1 - Patient Reminders

**Clinical Context**: Preventive care reminders  
**Patient Profile**: 50-year-old, due for colorectal cancer screening

**Given/When/Then Summary**:
- **Given**: Patient age 50, no prior colorectal cancer screening
- **When**: CDS identifies preventive care due
- **Then**: System generates:
  - Patient reminder: Colorectal cancer screening due
  - Options: Colonoscopy, FIT test, CT colonography, flexible sigmoidoscopy
  - Educational material: Screening benefits and risks
  - Scheduling assistance

**Edge Cases**:
- Patient barriers (cost, fear, time)
- Family history of CRC (earlier screening)
- Prior polyps or IBD (surveillance schedule)
- Patient declining screening

**Safety Constraints**:
- Provide balanced information
- Respect patient autonomy
- Offer multiple screening options
- Document patient decision

---

### Domain 5: Workflow & Knowledge Support

#### 4.1.1 - Guideline Retrieval

**Clinical Context**: Pneumonia treatment guidance  
**Patient Profile**: 68-year-old with community-acquired pneumonia

**Given/When/Then Summary**:
- **Given**: Provider treating patient with CAP, needs guideline reference
- **When**: CDS retrieves relevant guidelines
- **Then**: System provides:
  - Current guideline: IDSA/ATS CAP Guidelines (2019)
  - Key recommendations: Empiric antibiotic selection by severity
  - Severity assessment: CURB-65 or PSI score
  - Inpatient vs outpatient criteria
  - Duration of therapy recommendations

**Edge Cases**:
- Healthcare-associated pneumonia
- Aspiration pneumonia
- Immunocompromised patient
- Local resistance patterns

**Safety Constraints**:
- Use most current guideline version
- Consider local antibiogram
- Adjust for renal/hepatic function
- Monitor for antibiotic failure

---

#### 4.2.1 - Protocol Driven Care

**Clinical Context**: Sepsis management protocol  
**Patient Profile**: 72-year-old with septic shock

**Given/When/Then Summary**:
- **Given**: Patient meets sepsis-3 criteria with shock (lactate 4.2, hypotension)
- **When**: CDS activates sepsis protocol
- **Then**: System guides care bundle:
  - Hour 0: Blood cultures, lactate, broad-spectrum antibiotics
  - Hour 1: 30 mL/kg crystalloid bolus
  - Hour 3: Reassess lactate, clinical response
  - Hour 6: Vasopressors if still hypotensive
  - Source control identification

**Edge Cases**:
- Fluid overload risk (CHF, ESRD)
- Antibiotic allergy
- Unknown source of infection
- Immune-compromised

**Safety Constraints**:
- Time-critical interventions
- Avoid delays in antibiotic administration
- Monitor for antibiotic toxicity
- Adjust for organ dysfunction

---

#### 4.3.1 - Documentation Support

**Clinical Context**: Annual wellness visit documentation  
**Patient Profile**: 67-year-old Medicare patient, AWV due

**Given/When/Then Summary**:
- **Given**: Patient presenting for Medicare Annual Wellness Visit
- **When**: CDS provides documentation template
- **Then**: System pre-populates and guides:
  - Health risk assessment
  - Review of systems
  - Preventive services due (USPSTF guidelines)
  - Advance care planning discussion
  - Cognitive assessment
  - Depression screening

**Edge Cases**:
- Complex patient with multiple problems
- Time constraints
- Incomplete prior records
- Patient wanting to address acute issue

**Safety Constraints**:
- Ensure all required elements documented
- Accurate coding for reimbursement
- Meaningful clinical assessment
- Patient education provided

---

#### 4.4.1 - Care Coordination

**Clinical Context**: Post-hospitalization transition  
**Patient Profile**: 78-year-old discharged after hip fracture surgery

**Given/When/Then Summary**:
- **Given**: Patient discharged from hospital after hip fracture repair
- **When**: CDS coordinates care transitions
- **Then**: System ensures:
  - Discharge summary transmitted to PCP
  - Follow-up appointment scheduled (within 7 days)
  - Medication reconciliation completed
  - Home health or SNF arranged
  - DME ordered (walker, raised toilet seat)
  - Fall prevention plan
  - PT/OT referrals

**Edge Cases**:
- Patient lives alone with limited support
- Cognitive impairment
- Multiple specialists involved
- Insurance authorization delays

**Safety Constraints**:
- Prevent medication errors in transition
- Ensure follow-up scheduled
- Assess home safety
- Provide caregiver education

---

## Quality Metrics & Validation Criteria

### Test Coverage Metrics
- **Total CDS Categories**: 23/23 (100%)
- **Clinical Domains**: 5 (Assessment, Safety, Population, Engagement, Workflow)
- **Edge Cases per Scenario**: Minimum 4
- **Safety Constraints**: Defined for all scenarios

### Clinical Validation Requirements
- [ ] All scenarios reviewed by clinical subject matter expert
- [ ] Evidence-based guideline references verified
- [ ] Safety constraints validated against clinical practice
- [ ] Edge cases reflect real-world complexity
- [ ] Patient context appropriate for scenario type

### Testing Priorities
1. **High Priority**: Safety-critical scenarios (1.2.x, 2.4.1)
2. **Medium Priority**: Treatment decision support (1.1.x)
3. **Standard Priority**: Workflow support (4.x.x)

---

## Recommendations for Implementation

### Phase 1: Safety & High-Risk Scenarios (Immediate)
- Drug interactions (1.2.1)
- Adverse event monitoring (1.2.3)
- Public health reporting (2.4.1)

### Phase 2: Clinical Decision Support (Near-term)
- Differential diagnosis (1.1.1)
- Treatment recommendations (1.1.2)
- Diagnostic test selection (1.1.5)

### Phase 3: Population Health & Engagement (Future)
- Case management (2.1.1)
- Quality metrics (2.2.1)
- Patient reminders (3.3.1)

---

## Sign-Off & Review Status

**Clinical QA Agent Status**: ✅ Complete  
**Coverage Assessment**: ✅ 100% (23/23 scenarios)  
**Clinical Accuracy**: ⏳ Pending SME Review  
**Safety Validation**: ⏳ Pending Safety Review  
**Ready for BDD Generation**: ✅ Yes

---

*This document serves as the comprehensive test scenario inventory for the Enhanced Testing Coverage implementation. Each scenario is ready to be converted into executable BDD feature files following FishNet format conventions.*
